<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bandejita de Lata - Menú</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@500&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary: #FF4500;
            --gold: #FFD700; /* Color Dorado para destacados */
            --dark: #1a1a1a;
            --light: #f4f4f4;
        }
        body { margin: 0; font-family: 'Roboto', sans-serif; background-color: var(--light); color: var(--dark); padding-bottom: 80px; }
        
        /* HEADER */
        header {
            height: 35vh;
            background-image: url('https://images.unsplash.com/photo-1626844131082-256783844137?q=80&w=1935&auto=format&fit=crop'); 
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            display: flex; align-items: center; justify-content: center; position: relative;
        }
        header::after { content: ''; position: absolute; top:0; left:0; right:0; bottom:0; background: rgba(0,0,0,0.6); }
        .header-content { position: relative; z-index: 2; text-align: center; color: white; padding: 20px; }
        h1 { font-family: 'Oswald', sans-serif; font-size: 2.5rem; margin: 0; text-transform: uppercase; letter-spacing: 1px; }
        .subtitle { font-size: 1rem; margin-top: 5px; opacity: 0.9; }

        /* CONTENEDOR */
        .container { max-width: 600px; margin: -40px auto 0; padding: 15px; position: relative; z-index: 3; }
        
        /* TARJETAS NORMALES */
        .card {
            background: white;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            display: flex; justify-content: space-between; align-items: center;
            border-left: 4px solid transparent; /* Borde invisible por defecto */
        }

        /* ESTILO PARA DESTACADOS (LA ESTRELLA) */
        .card.destacado {
            border: 2px solid var(--gold); /* Borde dorado completo */
            background-color: #fffdf0; /* Fondo ligeramente amarillo */
            position: relative;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3); /* Sombra dorada */
        }
        
        /* La etiqueta "RECOMENDADO" */
        .badge-star {
            position: absolute;
            top: -12px;
            right: 20px;
            background-color: var(--gold);
            color: #000;
            font-size: 0.7rem;
            font-weight: bold;
            padding: 4px 10px;
            border-radius: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            display: flex; align-items: center; gap: 5px;
        }

        .info { flex: 1; padding-right: 10px; }
        .dish-name { font-family: 'Oswald', sans-serif; font-size: 1.2rem; margin: 0 0 4px 0; color: var(--dark); }
        .dish-desc { font-size: 0.85rem; color: #666; margin: 0; line-height: 1.4; }
        
        .price-tag { text-align: right; min-width: 70px; }
        .usd { font-size: 1.3rem; font-weight: bold; color: var(--primary); display: block; }
        
        /* BOTÓN WHATSAPP FLOTANTE */
        .fab {
            position: fixed; bottom: 20px; right: 20px;
            background-color: #25D366; color: white;
            padding: 12px 25px; border-radius: 50px;
            font-weight: bold; text-decoration: none;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            display: flex; align-items: center; gap: 8px; z-index: 100;
            transition: transform 0.2s;
        }
        .fab:active { transform: scale(0.95); }
    </style>
</head>
<body>

    <header>
        <div class="header-content">
            <h1>Bandejita de Lata</h1>
            <p class="subtitle">Menú Digital</p>
        </div>
    </header>

    <div class="container" id="menu-container">
        <p style="text-align: center; color: #888;">Cargando menú...</p>
    </div>

    <a href="#" id="whatsapp-btn" class="fab">
        <span>Hacer Pedido</span> 
        <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16"><path d="M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592z"/></svg>
    </a>

    <script>
        // ================= CONFIGURACIÓN =================
        const TELEFONO = "58424xxxxxxx"; // ¡TU NÚMERO AQUÍ!
        
        // ¡PEGA AQUÍ TU ENLACE CSV DE GOOGLE SHEETS!
        const SHEET_CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSfR6ILf3cDq51hVw-GBANJ1wpfH5NrKgBgPvaYMAUeSiWLpWUCsCPJIkA5m-Ok1E7NpPtJtLzfAURH/pub?gid=0&single=true&output=csv"; 
        // =================================================

        // 1. DETECTOR DE ORIGEN (TikTok, Instagram...)
        const params = new URLSearchParams(window.location.search);
        let origen = params.get('origen') || 'web';

        // 2. ACTUALIZAR LINK DE WHATSAPP
        const btn = document.getElementById('whatsapp-btn');
        btn.href = `https://wa.me/${TELEFONO}?text=${encodeURIComponent("Hola Angel, vengo de " + origen + " y quiero pedir:")}`;

        // 3. CARGAR MENÚ
        async function cargarMenu() {
            try {
                const response = await fetch(SHEET_CSV_URL);
                const data = await response.text();
                const filas = data.split('\n').map(row => row.split(',')); // Ojo: esto es simple, si usas comas en descripciones podría fallar.
                
                const contenedor = document.getElementById('menu-container');
                contenedor.innerHTML = ''; 

                // Arrays para separar destacados del resto
                let platosDestacados = [];
                let platosNormales = [];

                filas.forEach((fila, index) => {
                    if (index === 0) return; // Saltar encabezado

                    // MAPEO DE COLUMNAS SEGÚN TU FOTO:
                    // A[0]=Nombre, B[1]=Desc, C[2]=Precio, D[3]=Cat, E[4]=Disp, F[5]=Destacado
                    const nombre = fila[0];
                    const desc = fila[1];
                    const precio = fila[2];
                    const disponible = fila[4] ? fila[4].toLowerCase().trim() : '';
                    const destacado = fila[5] ? fila[5].toLowerCase().trim() : '';

                    // Solo mostrar si tiene nombre y está disponible ("si")
                    if (nombre && disponible === 'si') {
                        
                        // Determinar si es destacado
                        const esDestacado = destacado === 'si';
                        
                        // Crear HTML de la tarjeta
                        const html = `
                            <div class="card ${esDestacado ? 'destacado' : ''}">
                                ${esDestacado ? '<div class="badge-star">⭐ RECOMENDADO</div>' : ''}
                                <div class="info">
                                    <h3 class="dish-name">${nombre}</h3>
                                    <p class="dish-desc">${desc}</p>
                                </div>
                                <div class="price-tag">
                                    <span class="usd">$${precio}</span>
                                </div>
                            </div>
                        `;

                        // Guardar en la lista correspondiente
                        if (esDestacado) {
                            platosDestacados.push(html);
                        } else {
                            platosNormales.push(html);
                        }
                    }
                });

                // PINTAR PRIMERO LOS DESTACADOS, LUEGO LOS NORMALES
                contenedor.innerHTML += platosDestacados.join('');
                contenedor.innerHTML += platosNormales.join('');

            }
